<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Chameleon QR Code Generator</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <link rel="icon" href="icon.ico.png" type="image/x-icon">
  <style>
    body {
      font-family: 'Montserrat', sans-serif;
      background: #55996f;
      color: #fdf2e3;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      user-select: none;
    }

    .container {
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      box-shadow: 0 6px 30px rgba(0, 0, 0, 0.5);
      padding: 20px;
      width: 90%;
      max-width: 700px;
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .logo {
      width: 150px;
      margin-bottom: 10px;
    }

    h1 {
      font-size: 24px;
      margin-bottom: 20px;
      color: #fdf2e3;
      text-transform: uppercase;
    }

    input[type="text"] {
      width: calc(100% - 40px);
      padding: 12px;
      font-size: 16px;
      text-align: center;
      margin-bottom: 15px;
      border: none;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.1);
      color: #ffffff;
      outline: none;
    }

    input:focus {
      outline: none;
    }

    button {
      background: #fdf2e3;
      color: #55996f;
      border: none;
      border-radius: 8px;
      padding: 10px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      margin: 10px 5px;
      width: 190px;
      transition: background 0.3s, transform 0.2s;
    }

    button:hover {
      background: #e4d9c7;
      transform: scale(1.05);
    }

    .button-row {
      display: none;
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 15px;
    }

    .qr-section {
      display: none;
      flex-direction: column;
      align-items: center;
      margin-top: 20px;
    }

    #qrcode-container {
      position: relative;
      width: 230px;
      height: 230px;
      margin: 20px auto;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* Loading Spinner */
    #loading-spinner {
      display: none;
      border: 8px solid rgba(243, 243, 243, 0.3);
      border-top: 8px solid #fdf2e3;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 2s linear infinite;
      margin: 20px auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .support-container {
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      border-radius: 8px;
      padding: 15px;
      margin-top: 30px;
      max-width: 400px;
      width: 100%;
      text-align: center;
      font-size: 16px;
      color: #fdf2e3;
    }

    .support-container a {
      color: #fdf2e3;
      text-decoration: none;
      font-weight: bold;
    }

    .support-container a:hover {
      color: #55996f;
    }

    /* Mobile Styles */
    @media (max-width: 768px) {
      body {
        padding: 15px;  /* Added padding to body to ensure margin */
      }

      .container {
        padding: 20px;
        width: 100%;
        box-sizing: border-box;
      }

      .logo {
        width: 120px;
      }

      h1 {
        font-size: 22px;
        margin-bottom: 15px;
      }

      input[type="text"] {
        width: calc(100% - 30px);
        padding: 10px;
        font-size: 14px;
      }

      button {
        width: 100%;
        padding: 12px;
        font-size: 14px;
      }

      .button-row {
        width: 100%;
        gap: 8px;
      }

      .qr-section {
        margin-top: 15px;
      }

      #qrcode-container {
        width: 180px;
        height: 180px;
        max-width: 180px; /* Ensures the QR code is smaller than the container */
      }

      .support-container {
        margin-left: 20px;
        margin-right: 20px; /* Ensures support container has margin from screen edges */
      }
    }

    @media (max-width: 480px) {
      body {
        padding: 10px;  /* Additional margin for smaller screens */
      }

      .logo {
        width: 100px;
      }

      h1 {
        font-size: 20px;
      }

      input[type="text"] {
        font-size: 12px;
      }

      button {
        font-size: 14px;
        padding: 10px;
      }

      .qr-section {
        margin-top: 10px;
      }

      #qrcode-container {
        width: 160px;
        height: 160px;
      }

      .support-container {
        margin-left: 10px;
        margin-right: 10px; /* Ensures support container has margin from screen edges */
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <img src="logos.png" alt="Chameleon Logo" class="logo">
    <h1>Chameleon QR Code</h1>
    <input type="text" id="text-input" placeholder="Enter URL">
    <button id="generate-btn">Generate QR Code</button>

    <div id="loading-spinner"></div>
    <div id="waiting-message" class="waiting-message"></div>

    <div class="qr-section">
      <div id="qrcode-container"></div>
      <div class="button-row">
        <button id="download-btn">Download QR Code</button>
        <button id="remove-watermark-btn">Remove Watermark</button>
        <button id="generate-new-btn">Generate New</button>
      </div>
    </div>
  </div>

  <div class="support-container">
    <p>Need help? Contact us: <a href="mailto:contact.qrcodechameleon@gmail.com">contact.qrcodechameleon@gmail.com</a></p>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <script>
    // Array of random messages
    const messages = [
      "We don't store your data. Just generate your QR code and go.",
      "No account required. Simple, fast, and private.",
      "Supporting privacy—your data is yours and yours alone.",
      "Quick, easy, and completely anonymous. That’s how QR code generation should be."
    ];

    // Function to generate QR Code
    function generateQRCode() {
      const inputText = document.getElementById("text-input").value.trim();
      const generateBtn = document.getElementById("generate-btn");
      const loadingSpinner = document.getElementById("loading-spinner");
      const qrSection = document.querySelector(".qr-section");
      const qrcodeContainer = document.getElementById("qrcode-container");
      const buttonRow = document.querySelector(".button-row");
      const waitingMessage = document.getElementById("waiting-message");

      if (!inputText) {
        alert("Please enter a URL to generate a QR code.");
        return;
      }

      generateBtn.style.display = "none";
      loadingSpinner.style.display = "block";
      waitingMessage.style.display = "block";

      // Pick a random message
      const randomMessage = messages[Math.floor(Math.random() * messages.length)];
      waitingMessage.innerText = randomMessage;

      // Simulate QR code generation time
      setTimeout(() => {
        loadingSpinner.style.display = "none";
        waitingMessage.style.display = "none";
        qrSection.style.display = "flex";

        qrcodeContainer.innerHTML = "";

        // Generate QR code
        QRCode.toCanvas(document.createElement("canvas"), inputText, {
          width: 200,
          margin: 2,
          color: {
            dark: "#fdf2e3",
            light: "#00000000"
          }
        }).then((canvas) => {
          const ctx = canvas.getContext("2d");

          const watermarkText = "qrcodechameleon.com";
          ctx.font = "bold 22px Montserrat";
          ctx.fillStyle = "rgba(255, 255, 255, 0.7)";
          ctx.textAlign = "center";
          ctx.textBaseline = "middle";

          ctx.shadowColor = 'rgba(0, 0, 0, 1)';
          ctx.shadowBlur = 3;
          ctx.shadowOffsetX = 1;
          ctx.shadowOffsetY = 1;

          const centerX = canvas.width / 2;
          const centerY = canvas.height / 2;

          ctx.save();
          ctx.translate(centerX, centerY);
          ctx.rotate(Math.PI / 4);
          ctx.fillText(watermarkText, 0, 0);
          ctx.restore();

          qrcodeContainer.appendChild(canvas);
          buttonRow.style.display = "flex";
        }).catch((error) => {
          console.error("QR Code Generation Error:", error);
          alert("Failed to generate QR code. Please try again.");
        });
      }, 2500);
    }

    document.getElementById("generate-btn").addEventListener("click", generateQRCode);
    document.getElementById("text-input").addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        generateQRCode();
      }
    });

    document.getElementById("download-btn").addEventListener("click", () => {
      const qrCanvas = document.querySelector("#qrcode-container canvas");
      if (!qrCanvas) {
        alert("No QR code to download!");
        return;
      }

      const link = document.createElement("a");
      link.href = qrCanvas.toDataURL("image/png");
      link.download = "qrcode.png";
      link.click();
    });

    document.getElementById("remove-watermark-btn").addEventListener("click", () => {
      const inputText = document.getElementById("text-input").value.trim();
      if (!inputText) {
        alert("Please generate a QR code first!");
        return;
      }

      localStorage.setItem("qrText", inputText);
      window.location.href = "https://buy.stripe.com/test_9AQ5o60a43oz0XCbII";
    });

    document.getElementById("generate-new-btn").addEventListener("click", () => {
      location.reload();
    });
  </script>
</body>
</html>
