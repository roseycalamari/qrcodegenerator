<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Chameleon QR Code Generator</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <link rel="icon" href="icon.ico.png" type="image/x-icon"> <!-- Add your icon here -->
  <style>
    body {
      font-family: 'Montserrat', sans-serif;
      background: #55996f;
      color: #fdf2e3;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      user-select: none; /* Disable text selection */
    }

    .container {
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      box-shadow: 0 6px 30px rgba(0, 0, 0, 0.5);
      padding: 20px;
      width: 95%;
      max-width: 700px;
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .logo {
      width: 150px; /* Adjust logo size */
      margin-bottom: 2px;
    }

    h1 {
      font-size: 24px;
      margin-bottom: 20px;
      color: #fdf2e3;
      text-transform: uppercase;
    }

    input[type="text"] {
      width: calc(100% - 40px);
      padding: 12px;
      font-size: 16px;
      text-align: center;
      margin-bottom: 15px;
      border: none;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.1);
      color: #ffffff; /* Text color matches the title */
      outline: none;
    }

    input:focus {
      outline: none; /* Remove outline when input is focused */
    }

    button {
      background: #fdf2e3;
      color: #55996f;
      border: none;
      border-radius: 8px;
      padding: 10px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      margin: 10px 5px;
      width: 190px;
      transition: background 0.3s, transform 0.2s;
    }

    button:hover {
      background: #e4d9c7;
      transform: scale(1.05);
    }

    .button-row {
      display: none; /* Buttons are hidden by default */
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 15px;
    }

    .qr-section {
      display: none;
      flex-direction: column;
      align-items: center;
      margin-top: 20px;
    }

    #qrcode-container {
      position: relative;
      width: 230px; /* Adjusted width for mobile version */
      height: 230px; /* Adjusted height for mobile version */
      margin: 20px auto;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* Loading Spinner (Centered and More Transparent) */
    #loading-spinner {
      display: none; /* Initially hidden */
      border: 8px solid rgba(243, 243, 243, 0.3); /* Light transparent background */
      border-top: 8px solid #fdf2e3; /* Solid spinning color */
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 2s linear infinite;
      margin: 20px auto; /* Centers the spinner */
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Customer Support Email Container */
    .support-container {
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      border-radius: 8px;
      padding: 15px;
      margin-top: 30px;
      max-width: 400px;
      width: 100%;
      text-align: center;
      font-size: 16px;
      color: #fdf2e3;
    }

    .support-container a {
      color: #fdf2e3;
      text-decoration: none;
      font-weight: bold;
    }

    .support-container a:hover {
      color: #55996f;
    }

    /* Web App Movement Message Container */
    .waiting-message {
      display: none; /* Initially hidden */
      background: rgba(0, 0, 0, 0.2); /* More transparent */
      backdrop-filter: blur(10px);
      border-radius: 8px;
      padding: 10px;
      margin-top: 15px;
      font-size: 16px;
      color: #ffffff; /* Darker font color */
      text-align: center;
    }

    /* Mobile Styles */
    @media (max-width: 768px) {
      .container {
        padding: 15px;
        width: 90%;
      }

      .logo {
        width: 120px;
      }

      h1 {
        font-size: 22px;
        margin-bottom: 15px;
      }

      input[type="text"] {
        width: calc(100% - 30px);
        padding: 10px;
        font-size: 14px;
      }

      button {
        width: 100%;
        padding: 12px;
        font-size: 14px;
      }

      .button-row {
        width: 100%;
        gap: 8px;
      }

      .qr-section {
        margin-top: 15px;
      }

      #qrcode-container {
        width: 180px; /* Adjusted smaller QR code */
        height: 180px; /* Adjusted smaller QR code */
      }
    }

    @media (max-width: 480px) {
      .logo {
        width: 100px;
      }

      h1 {
        font-size: 20px;
      }

      input[type="text"] {
        font-size: 12px;
      }

      button {
        font-size: 14px;
        padding: 10px;
      }

      .qr-section {
        margin-top: 10px;
      }

      #qrcode-container {
        width: 160px; /* Adjusted smaller QR code */
        height: 160px; /* Adjusted smaller QR code */
      }
    }

  </style>
</head>
<body>
  <div class="container">
    <img src="logos.png" alt="Chameleon Logo" class="logo">
    <h1>Chameleon QR Code</h1>
    <input type="text" id="text-input" placeholder="Enter URL">
    <button id="generate-btn">Generate QR Code</button>

    <!-- Loading Spinner (Centered and More Transparent) -->
    <div id="loading-spinner"></div>

    <!-- Waiting Message (Appears while QR Code is generating) -->
    <div id="waiting-message" class="waiting-message"></div>

    <div class="qr-section">
      <div id="qrcode-container"></div>
      <div class="button-row">
        <button id="download-btn">Download QR Code</button> <!-- Download Button -->
        <button id="remove-watermark-btn">Remove Watermark</button>
        <button id="generate-new-btn">Generate New</button>
      </div>
    </div>
  </div>

  <!-- Customer Support Section -->
  <div class="support-container">
    <p>Need help? Contact us: <a href="mailto:contact.qrcodechameleon@gmail.com">contact.qrcodechameleon@gmail.com</a></p>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <script>
    // Array of random messages related to web app movement and privacy
    const messages = [
      "We don't store your data. Just generate your QR code and go.",
      "No account required. Simple, fast, and private.",
      "Supporting privacy—your data is yours and yours alone.",
      "Quick, easy, and completely anonymous. That’s how QR code generation should be.",
      "Why create an account when you can just create a QR code?",
      "No delays, no data storage, just QR codes. That's our promise.",
      "Your privacy is our priority. Generate a QR code in seconds.",
      "Instant QR code generation with no unnecessary steps.",
      "Simplifying QR code creation without compromising your privacy.",
      "One click, one code, no sign-up required.",
      "We’re here for your privacy. Your data is safe with us—now and always.",
      "Our mission is to make QR codes easy without the hassle of accounts."
    ];

    // Function that generates the QR Code when called
    function generateQRCode() {
      const inputText = document.getElementById("text-input").value.trim();
      const generateBtn = document.getElementById("generate-btn");
      const loadingSpinner = document.getElementById("loading-spinner");
      const qrSection = document.querySelector(".qr-section");
      const qrcodeContainer = document.getElementById("qrcode-container");
      const buttonRow = document.querySelector(".button-row");
      const waitingMessage = document.getElementById("waiting-message");

      if (!inputText) {
        alert("Please enter a URL to generate a QR code.");
        return;
      }

      generateBtn.style.display = "none"; // Hide generate button after click
      loadingSpinner.style.display = "block"; // Show loading spinner
      waitingMessage.style.display = "block"; // Show waiting message

      // Pick a random message from the array
      const randomMessage = messages[Math.floor(Math.random() * messages.length)];
      waitingMessage.innerText = randomMessage;

      // Simulate the QR code generation time (slightly extended for user to read the message)
      setTimeout(() => {
        loadingSpinner.style.display = "none"; // Hide loading spinner
        waitingMessage.style.display = "none"; // Hide waiting message
        qrSection.style.display = "flex";

        qrcodeContainer.innerHTML = ""; // Clear existing QR codes

        // Generate QR code
        QRCode.toCanvas(document.createElement("canvas"), inputText, {
          width: 200,
          margin: 2,
          color: {
            dark: "#fdf2e3", // QR code dots
            light: "#00000000", // Transparent background
          },
        }).then((canvas) => {
          const ctx = canvas.getContext("2d");

          // Watermark Text Diagonal - Adjusted Font Size to Fit
          const watermarkText = "qrcodechameleon.com";
          ctx.font = "bold 22px Montserrat";  // Changed font to Montserrat
          ctx.fillStyle = "rgba(255, 255, 255, 0.7)"; // Slightly increased opacity
          ctx.textAlign = "center";
          ctx.textBaseline = "middle";

          // Set sharper shadow properties for the watermark
          ctx.shadowColor = 'rgba(0, 0, 0, 1)';  // Sharper black shadow with opacity
          ctx.shadowBlur = 3; // Sharper blur shadow
          ctx.shadowOffsetX = 1; // Offset the shadow horizontally
          ctx.shadowOffsetY = 1; // Offset the shadow vertically

          // Calculate the center of the QR code
          const centerX = canvas.width / 2;
          const centerY = canvas.height / 2;

          // Watermark Text Diagonal (Centered and adjusted to fit inside the QR code)
          ctx.save();
          ctx.translate(centerX, centerY);
          ctx.rotate(Math.PI / 4); // Diagonal rotation
          ctx.fillText(watermarkText, 0, 0);
          ctx.restore();

          qrcodeContainer.appendChild(canvas); // Append canvas with watermark
          buttonRow.style.display = "flex"; // Show buttons after QR code is generated
        }).catch((error) => {
          console.error("QR Code Generation Error:", error);
          alert("Failed to generate QR code. Please try again.");
        });
      }, 2500); // QR code generation time (increased to give time for message display)
    }

    // Trigger generateQRCode function when the button is clicked
    document.getElementById("generate-btn").addEventListener("click", generateQRCode);

    // Trigger generateQRCode function when the Enter key is pressed
    document.getElementById("text-input").addEventListener("keydown", function(event) {
      if (event.key === "Enter") {
        generateQRCode();
      }
    });

    // Download button functionality
    document.getElementById("download-btn").addEventListener("click", () => {
      const qrCanvas = document.querySelector("#qrcode-container canvas");
      if (!qrCanvas) {
        alert("No QR code to download!");
        return;
      }

      const link = document.createElement("a");
      const filename = document.getElementById("text-input").value.replace(/[^a-z0-9]/gi, '-').toLowerCase() + ".png";
      link.href = qrCanvas.toDataURL("image/png");
      link.download = filename;
      link.click();
    });

    document.getElementById("remove-watermark-btn").addEventListener("click", () => {
      const inputText = document.getElementById("text-input").value.trim();
      if (!inputText) {
        alert("Please generate a QR code first!");
        return;
      }

      localStorage.setItem("qrText", inputText);

      const stripePaymentLink = "https://buy.stripe.com/test_9AQ5o60a43oz0XCbII"; 
      window.location.href = `${stripePaymentLink}?redirect=https://yourdomain.com/paid.html`; 
    });

    document.getElementById("generate-new-btn").addEventListener("click", () => {
      location.reload();
    });
  </script>
</body>
</html>
